# 基础学科和行业知识

这一节我们讲一讲基础学科和我们所测试的业务行业知识，基础学科说白了就是语文和数学，业务行业即你所服务的工作所涉及到的行业领域。为什么要提语文和数学呢，说白了一切学科的基础，测试同学在测试过程中一定发现了很多错误描述信息，错别字等，尤其是我们中国文字不注意很容易用错一些词语。

## 从实例中学习

一些容易被忽略，不容易被注意的问题：  
1. > _登录or登陆_:很多系统用错这个词语，一些测试同学也没有注意到这个问题。
2. > _bugID10086:页面查询时间筛选不好用。_ 提交的bug没有任何有用的信息描述，准确的描述可以减少很多不必要的沟通成本，比如：可以直接建议时间筛选怎样调整能有更好的用户体验，这样就比较具体了。ps一个沟通技巧：沟通一件事时把相关人员一同叫上，不要转述很多次。
3. > _asdasdasd 测试123 test111221_: 随意的测试数据只会变成脏数据，转身就会忘了昨晚的女孩叫什么名字了。

一些计算机的基础知识：
1. > _非标准ASCII码（超127）_: 会导致无法解析；
2. > _数据库字段长度设置_: TINYTEXT/TEXT，线上使用长度越来越长，最终导致长度超范围，报错无法插入数据；
3. > _正则的非怎么取_: 经常匹配存在的，很少使用到取非的场景，
4. > _网络协议/应用层协议_: 字段含义，协议定义，信号解析，发送等等；（抓包分析一个交互过程，OSI七层模型，TCP/IP协议，进制转换）
5. > _简述浏览器访问一个url的完整流程_:
6. > _邮件协议_:pop3\smtp\imap4区别


### mysql

- 索引

	- B+索引/hash索引
	- 唯一索引
	- 主键索引
	- 组合索引
	- 优点：有效加速查询； 缺点：操作数据时需要对索引进行更新，效率上稍微差一点；索引需要占用一定的空间
	- 有序存储

		- 二分查找

- 索引设计

	- 没有利用索引的情况一般有以下几种： 以“%”开头的LIKE语句，模糊匹配 OR 语句前后没有同时使用索引 数据类型出现隐式转化（如varchar不加单引号的话可能会自动转换为int型） where 子句中对字段进行表达式操作 在where子句中对字段进行函数操作 合理的使用like

- 三个范式
- 主键、超键、外键
- 事务

	- 原子性

		- 要么全部完成，要么全部不完成

	- 一致性

		- 事务开始之前和事务结束以后，数据库的完整性约束没有被破坏

	- 隔离性

		- 防止事务操作间的混淆

	- 持久性

		- 持久的保存在数据库

- 视图

	- 虚拟表

		- 简化复杂的sql操作，隐藏具体的细节，保护数据

- myisam与innodb

	- innodb支持事务
	- innodb支持行级锁

		- 基于索引
		- 如果 id 不是索引键那么InnoDB将完成表锁

	- innodb支持外键
	- innodb不支持全文索引

- 锁

	- 行级锁

		- 优点：回滚数据少、只锁部分行、长时间锁单一行 缺点：更耗内存、多锁效率低、

	- 表锁

- 数据类型

	- 数值、日期/时间和字符串(字符)类型
	- int、float、double/date、time/char、varchar、text、longtext等

- 排序

	- distinct去重

		- SELECT DISTINCT country FROM Websites;

	- orderby 排序
	- GROUP BY 分组
	- 序列 AUTO_INCREMENT

- 导出/导入

	- SELECT ... INTO OUTFILE
	- mysqldump
	- # mysql -uroot -p123456 < runoob.sql
	- mysql> source /home/abc/abc.sql  # 导入备份数据库
	- $ mysqlimport -u root -p --local database_name dump.txt

- 基础sql

	- 建库

		- CREATE DATABASE 数据库名;

			- drop database <数据库名>;

		- use RUNOOB;

	- 建表

		- CREATE TABLE table_name (column_name column_type);

			- DROP TABLE table_name ;

	- 增加

		- INSERT INTO table_name ( field1, field2,...fieldN )                        VALUES                        ( value1, value2,...valueN );

	- 删除

		- drop、delete、truncate

			- drop直接删掉表 truncate删除表中数据，再插入时自增长id又从1开始 delete删除表中数据，可以加where字句。
			- DELETE  DML（data maintain Language，操作不会减少表或索引所占用的空间，可回滚
			-  truncate、drop    DLL（data define language),操作立即生效，不可回滚

		- DELETE FROM table_name [WHERE Clause]

	- 查询

		- SELECT column_name,column_name FROM table_name [WHERE Clause] [LIMIT N][ OFFSET M]

	- 更新/修改

		- UPDATE table_name SET field1=new-value1, field2=new-value2 [WHERE Clause]
		- ALTER TABLE testalter_tbl  DROP i; 修改表

	- 联查

		- SELECT w.name, w.url, a.count, a.date  FROM Websites AS w, access_log AS a  WHERE a.site_id=w.id and w.name="菜鸟教程";

	- 创建索引

		- CREATE INDEX index_name ON table_name (column_name)

	- 通配符

		- %


### redis

- 基于内存的高性能key-value数据库
- 多种数据类型

	- String、list、hash、set、消息队列

- 快速-持久化
- 支持事务（原子性）
- 可用缓存-设置key过期时间（token、session）

	- 高性能缓存

- 常见架构

	- 单机
	- 分布式-主从

		- 降低压力
		- 缺点：master压力未解决、不能高可用

	- 哨兵模式

		- 哨兵监控，高可用，自动故障转移
		- 缺点：切换要丢数据、master写压力

	- 集群代理模式

		- 缺点：增加代理节点的维护

	- 集群直连模式（3.0版本）

- 单线程
- 缓存穿透

	- 恶意的请求会故意查询不存在的key
	- 解决：空结果也缓存，时间短一点、过滤不存在的key

- 缓存雪崩

	- 失效时间一致，导致大量请求到后端服务
	- 解决：线程枷锁、二级缓存、不同key设置不同时间

## mongoDB

- 文档存储

	- 查询方便
	- 类似JSON，BSON

- 优点

	- 文档结构的存储方式
	- 性能优越-查询快速

- 缺点

	- 不支持事务操作
	- mongodb占用空间过大
	- 无法进行关联表查询，不适用于关系多的数据

### ES（elasticsearch）

- 索引
- 分布式集群-master选举
- 分布式的搜索引擎和数据分析引擎
- 全文检索，结构化检索，数据分析
- 对海量数据进行近实时的处理
- 使用场景

	- 维基百科
	- 数据分析（用户行为、点击量、浏览量）

### Hbase

- 面向列的NoSQL
- 存储容量大，易扩展

	- hadoop
	- 海量分析、高可靠性

- 海量数据写入-BulkLoad
- RowKey的设计、预建分区和列族设计
- 使用JavaAPI来编写WEB应用；使用HBase提供的RESTful接口
- HBase只支持简单的字符串
- 优化

	- 根据你的RowKey设计来进行预建分区，减少region的动态分裂
	- HFile是数据底层存储文件，在每个memstore（内存，进入内存则返回成功，高IO）进行刷新时会生成一个HFile，当HFile增加到一定程度时， 会将属于一个region的HFile进行合并（compact），这个步骤会带来开销但不可避免，但是合并后HFile大小如果大于设定的值， 那么HFile会重新分裂。为了减少这样的无谓的I/O开销，建议估计项目数据量大小，给HFile设定一个合适的值
	- 减少启停
	- 减少数据量
	- RowKey设计

		- 散列性：散列性能够保证相同相似的rowkey聚合，相异的rowkey分散，有利于查询
		- 简短性
		- 唯一性：rowKey必须具备明显的区别性
		- 考虑业务，查询
		- 列族设计

### 几大数据库的对比

- MongoDB做高性能数据库，Redis做缓存，HBase做大数据分析。MongoDB还无法取代关系型数据库。

相关行业知识：

* 汽车行业知识（位置灯、雾灯，车辆各种信号，车厂产线知识，车企关注的点）
* 零售行业
* 餐饮行业
* 银行/金融行业
* 其他相关行业

需要平日里多思考多积累，对我们的工作和生活都是有益的。


