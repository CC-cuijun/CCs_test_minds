# 测试运维思维

为什么需要像运维一样的思考呢，一个高可用，维护方便，日志简明方便排查问题，服务及业务可监控的高质量系统是运维最喜欢的。所以要求我们所交付运维的服务及模块有很高的质量要求。同时也要求测试同学能有一些运维知识或者说对系统层面有一定的认识，才能更好的排查定位问题，能对开发的交付质量有更多维度的考量。

## 看先看一些例子：
### 系统相关：
* HBASE有节点无端挂掉（NTP）
* lvs调度算法设置错误（导致没有流量均衡到后端服务）
* hosts文件导致的问题没有通过DNS解析（每个服务配置DNS，每一次变更都需要更改配置，为什么不配置DNS呢？）
* 系统的容灾恢复能力（tomcat由于服务过多导致启动需要10分钟以上，对业务影响时间太长）
### 交付质量相关：
* CPUload异常升高（发布时日志等级设置错误/不合理的日志打印，都会导致大量磁盘IO）
* 系统的平行扩展能力（由于只能建立一个连接导致不支持平行扩展，需要拆分服务，优化架构）

## 哪些东西是值得我们去思考的呢？
* 部署规范（了解运维部署方式）
* 服务器性能监控方式(可视化的监控,10年前的运维就是靠各种脚本+定时任务做日常监控)
 - zabbix（可以读懂各项指标）
* 业务监控
* 日志规范: _不规范对日志输出将导致运维无法排错，占据大量的磁盘空间（影响成本），影响日志回滚策略，大量对磁盘IO对性能影响非常明显。_
* 数据库规范（DBA）:_备份策略_
* linux相关知识
  - 常用命令
  - shell脚本
  - 端口监控
  - 关注内存（关注jvm，关注GC）
  - 关注cpuload
  - 关注网卡（会抓包分析）
* 网络相关知识
* 基础架构知识

### 服务日志测试
- 日志等级设置是否合理
- 日志格式是否标准
- 是否方便跟踪服务运行状况
- 是否压缩/回滚

### 性能测试（不做展开，后续可做专题）：
 > 举例：有人问性能怎么样？TPS如何？我其实不知道应该怎样用他能懂的方式去回答，因为这个是一个综合指标，是要带很多条件的，服务器配置，业务节点规模，网络因素等都需要考虑，所以主要有明确的测试目的，结合测试策略才能得出相对准确的性能报告。比如：8核16g的服务器理论上比4核8g的服务器TPS应该翻倍，所以单独回答一个业务指标TPS，或者性能如何，其实是没有任何意义的。
