# 测试最亲密的朋友-开发

开发是测试同学平日打交道最多的角色，但是你真的了解这个角色吗，你知道他们是怎么开发的吗？当你学习一门编程语言并落地实施一个项目后你就会有真切的感受。

## 学习一些开发知识：
- 能了解在开发人员在哪个环节容易犯错误，知道在哪个逻辑结构、哪个接口或函数，甚至可以发现组件的使用，技术设计上的问题；
- 可以更好地能理解软件产品；
- 可以帮助开发人员进行快速缺陷定位；
- 可以了解软件的设计思路；
- 可以编写一些辅助测试的小工具，做自动化，甚至测试框架的开发；

我们看下面看一些bug的例子：
> 一个配置引发的问题：  
> 数据库字段设置引发的问题：字段长度设计不够，上线一段时间后导致数据无法写入；  
> 一个for循环一个if/else：嵌套几次你就知道为什么要做边界值的测试，其实各种用例设计方法就是这样被总结出来的；  
> 枚举：定义的枚举类型代码中写错了一个字母，导致不生效；  
> 线程安全非安全举例：多线程时调用一个对象出错；  

## 怎样用开发的思维来服务测试呢？

* 测试一定要参与各类设计评审（开发的各种设计文档，数据流图，时序图以及接口文档等）：不能让开发告诉你怎么测试，而是需要从需求和各个设计文档中去考虑我们的测试策略，测试范围，测试用例的设计，以及是否需要测试工具的开发工作；
* 主动了解被测系统架构，学习容器化等知识（架构图/部署图/高可用K8s集群）；
> 测试人员了解业务/架构设计，清楚业务数据流程以及接口调用时序，可以设计更有针对性的测试用例，可以更精确的确定回归测试范围，而不是纯黑盒的按黑盒测试思维来覆盖测试，可以更精准的定位bug，降低研发过程成本；
> 契约测试：预先订立契约（如接口文档，kakfa消息），不依赖对方是否完成实际开发，按契约开发，开发完成按约定做联调，做过前端开发的话你就知道只有有接口定义，我的路由可以自己返回数据而不需要真正调用后端服务；
* 了解所测系统使用到到基础服务，如：hbase、kafka、ES、mongoDB、redis等（举例：hbase基准测试 ES基准测试）
* 学习gitflow：属于开发规范，也属于质量过程管理中的一环，不合理的分支管理模型会大大增加测试的时间以及质量风险；
> 虽然业界有很多玩法，但是这个就像设计模式一样，经过时间沉淀过的流程都是比较靠谱有参考价值的，该踩过的坑人家已经踩过了。
* 学习一门编程语言并落地：这是你真正能力切实体会到一个开发过程，怎样挖坑、掉坑又填坑的过程（开发面对不合理的需求的时候一般都是抗拒的，如果时间紧张，无法做好设计的话，就会考虑不周全，会出现很多bug，需求理解不一致，功能实现可能都会有问题，开发的思想就是按需求给你完成，不考虑其他东西，上线一段时候后新需求来了之前的设计根本没有扩展性或者兼容性，非常痛苦）；
> 我印象最深是我刚开始做测试开发的时候，做的东西没有考虑好，后续扩展，bug修改都很麻烦，所以一定要先分析，先设计，考虑扩展性，你会学到怎样调试，怎样改bug，了解为什么要做配置测试，了解JVM，你真正做过之后你完全具备指导研发过程的演进的能力；  
> 做过开发后，对性能测试的理解会更深入。曾经很一次有意思的工具开发过程，当时开发一个kakfa压测工具，一开始服务端性能不行，很快就到了瓶颈，开发优化了几版之后性能瓶颈转移到压测工具上了，结果反过来需要优化压测工具，花了一天时间改造优化工具，优化后性能飙升，一个客户端节点可以对应好几个节点。
* 学习一两个开源框架/工具：jmeter/RF，从各种开源代码你可以学到很多的设计思维，看看人家的代码和设计，自己学着写一些RF自定义关键字，测试库，开发自己的jmeter插件，以及源码的二次开发）
* 学习数据库相关知识（含关系型和非关系型）（举例：状态设置：0/1，不看说明根本不知道0/1具体代表什么状态，ture/false，enable/disable就会一目了然）

<pre>
数据库的一些测试总结：
- mysql优化  
  - 表设计的合理性（数据库表结构的优化 ）  
  - 字段类型是否合理（如字段长度设置） 
  - 查询是否添加索引
  - 多表关联查询效率（索引设计，了解索引类型）
  - 是否需要临时表或者视图
  - SQL语句及索引的优化
  - 增加缓存/内存扩容
  - 关注慢查询
  - explain sql语句
	- 读写分离，主库写，从库读
	- 限定查询范围
	- 表分区
		- 存储更多数据
		- 查询速度
		- 易维护
- 数据库测试
  - 业务数据是否正确保存
  - 设计字段是否合理
  - 数据库/表设计是否合理（关联关系、索引）
  - 备份策略
- 数据库问题排查
  - top查看是否mysqld
  - show processlist
  - session情况
  - 查找线程
  - 连接数
- redis：
    - 缓存 + DB 的读写分离架构
    - 缓存层使用 key-value 的形式来承载大量的读操作
    - DB层数据持久化
    - redis为什么是单线程：redis核心就是，如果我的数据全都在内存里，我单线程的去操作，就是效率最高的，多线程涉及cpu的调度，涉及上下文切换，反而效率不高。
- mongoDB
- kafka
- hbase
  - Hbase逐个提交/批量提交（性能）
- ES

</pre>

* 学习WEB/IOS/Android相关知识（了解H5，APP相关更重用户体验、交互）




